generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model categories {
  id          Int    @id @default(autoincrement())
  name        String @default("") @db.TinyText
  description String @db.Text
}

model cities {
  id      Int    @id @default(autoincrement())
  name    String @default("") @db.TinyText
  zipcode Int    @default(0) @db.MediumInt
}

model featurename {
  id          Int     @id
  name        String  @default("") @db.TinyText
  description String? @db.Text
}

model features {
  id        Int  @id @default(autoincrement())
  venueID   Int
  featureID Int?

  @@index([featureID], map: "FK_features_featurename")
  @@index([venueID], map: "FK_features_venues")
}

model payments {
  id          Int      @id
  userID      Int
  reserveID   Int
  paymentDate DateTime @default(now()) @db.Timestamp(0)
  status      String   @default("pending") @db.VarChar(20)
  amount      Int      @default(0) @db.SmallInt

  @@index([reserveID], map: "FK_payments_reservations")
  @@index([userID], map: "FK_payments_users")
}

model reservations {
  id           Int      @id @default(autoincrement())
  userID       Int?
  venueID      Int?
  paymentID    Int?
  reserveDate  DateTime @default(now()) @db.Timestamp(0)
  cost         Int      @default(0)
  startTime    DateTime @db.Date
  endTime      DateTime @db.Date
  guestsNumber Int      @db.SmallInt

  @@index([paymentID], map: "FK_reservations_payments")
  @@index([userID], map: "FK_reservations_users")
  @@index([venueID], map: "FK_reservations_venues")
}

model reviews {
  id          Int    @id @default(autoincrement())
  venueID     Int
  userID      Int
  rating      Int    @default(0) @db.TinyInt
  heading     String @default("") @db.TinyText
  description String @default("") @db.Text

  @@index([userID], map: "FK_reviews_users")
  @@index([venueID], map: "FK_reviews_venues")
}

model users {
  id                Int       @id @default(autoincrement())
  firstName         String    @db.Text
  lastName          String    @db.Text
  phoneNumber       String    @db.VarChar(16)
  address           String    @db.Text
  email             String    @db.TinyText
  username          String    @db.VarChar(48)
  password          String    @db.TinyText
  registerationDate DateTime  @default(now()) @db.Timestamp(0)
  country           String    @default("") @db.VarChar(56)
  activation        Int?
  activationDate    DateTime? @db.Timestamp(0)
}

model venues {
  id          Int    @id @default(autoincrement())
  name        String @default("") @db.TinyText
  category    Int
  city        Int
  capacity    Int    @default(0) @db.SmallInt
  description String @default("") @db.Text
  rating      Int    @default(0) @db.TinyInt
  price       Int    @default(0)
  space       Int?   @default(0) @db.SmallInt
  rules       String @default("") @db.Text
  policy      String @db.Text

  @@index([category], map: "FK_venues_categories")
  @@index([city], map: "FK_venues_cities")
}
